!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=(window,function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(t){return t&&t.__esModule?t:{"default":t}},r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=function H(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:H(r,e,n)}if("value"in i)return i.value;var o=i.get;return void 0===o?void 0:o.call(n)},u=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Shopify.Breakpoints,c=Shopify.UIPopover,d=Shopify.Loading,h=Shopify.rootDispatcher,p=Shopify.hotshot,f=Shopify.Browser,m=Shopify.Keycodes,g=Shopify.Flash,y=Shopify.Events,v=Shopify.AnalyticsAPI,b=Shopify.Time,S=Shopify.routes,C=Shopify.range,E=window.Page;(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.Remote=function(){function e(e,n,i,r){this.ajaxOptions=null!=e?e:{},this.refreshOnSuccess=n,this.refreshOnError=i,this.fullRefresh=null!=r?r:!1,this.submit=t(this.submit,this)}return e.prototype.submit=function(){var t;Shopify.Loading.start(),t=$.ajax(this.ajaxOptions),t.always(function(){return Shopify.Loading.stop()}),t.done(function(t){return function(e,n,i){var r,o,a;return(r=i.getResponseHeader("X-Next-Redirect"))?void Page.visit(r,{reload:!0}):(null!=(o=t.ajaxOptions.done)&&o.apply(null,arguments),a=t.refreshOnSuccess?t.refreshOnSuccess.split(" "):[],t.fullRefresh?Page.refresh({onlyKeys:a}):"false"!==t.refreshOnSuccess?Page.refresh({response:i,onlyKeys:a}):void 0)}}(this)),t.fail(function(t){return function(e,n,i){var r;return null!=(r=t.ajaxOptions.fail)&&r.apply(null,arguments),"false"!==t.refreshOnError?t.refreshOnError?Page.refresh({response:e,onlyKeys:t.refreshOnError.split(" ")}):Shopify.handleError(e,n,i):void 0}}(this))},e}()}).call(this),function(){Shopify.DashboardActivity=function(){function t(t){this.activityFilter=t||"all"}return t.prototype.activityLoading=!1,t.prototype.loadMoreActivity=function(t){return this.activityLoading=!0,this.xhr&&this.xhr.abort(),this.xhr=$.ajax({dataType:"html",data:{activity_pages:t,activity_filter:this.activityFilter},url:"/admin/dashboard/activity_feed",success:function(t){return function(){return Page.refresh({onlyKeys:["dashboardActivity"],response:t.xhr})}}(this),done:function(){return this.activityLoading=!1}}),this.xhr.fail(Shopify.handleError)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SummaryReport=function(){function e(e,n){var i;null==n&&(n={}),this.changeChannelProvider=t(this.changeChannelProvider,this),this.changeDateRange=t(this.changeDateRange,this),this.$node=$(e),this.queryProps||(this.queryProps={startDate:"-30d",endDate:"-1d",channelFilter:""}),i=Object.assign({},n.actionConfig),i[Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT]=this.changeChannelProvider,Shopify.rootDispatcher.register(i).bindToNode(e),this.initializeView(),this._load()}return e.prototype.FINANCES_PATH="finances/show",e.prototype.queries=function(){throw new Error("Subclasses must define at least one shopifyQL query.")},e.prototype.initializeView=function(){},e.prototype.createTemplate=function(t){var e;return e=this.$node.find(t).remove(),_.template(e.html())},e.prototype.append=function(t,e){return this.$node.empty(),this.$node.append(t(e))},e.prototype.extractKey=function(t){var e,n,i;return n=t.query.columns[0].field,i=Shopify.Inflection.classify(n),e=i.charAt(0).toLowerCase()+i.substring(1)},e.prototype.changeDateRange=function(t){var e,n,i;return n=t.data,i=n.startDate,e=n.endDate,this.queryProps.startDate=i,this.queryProps.endDate=e,this._load()},e.prototype.changeChannelProvider=function(t){var e,n,i;return i=t.data.split("-"),e=i[0],n=i[1],"all"===e?this.queryProps.channelFilter="":(this.queryProps.channelFilter="WHERE channel_provider_id == "+e,n&&(this.queryProps.channelFilter+=" AND location_id == '"+n+"'")),this._load()},e.prototype._load=function(){var t,e;return this.renderLoading&&this.renderLoading(),t=this.queries(),Promise.all(function(){var n;n=[];for(e in t)n.push(Shopify.AnalyticsAPI.query(t[e]));return n}()).then(this.renderResult.bind(this))["catch"](this.renderError.bind(this))},e.prototype.renderResult=function(t,e,n){throw new Error("Subclasses must handle successful query results.")},e.prototype.renderError=function(t,e,n){throw new Error("Subclasses must handle failed query results.")},e}()}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}};i="2",e="reports:channelpicker:channel-changed",t="reports:channelpicker:after-channel-changed",n="SHOW orders\nFROM sales\nWHERE financial_status != 'refunded'\nSINCE -90d\nUNTIL 0d",Shopify.SummaryReportChannelpicker=function(){function i(t,e){this._onChannelChanged=r(this._onChannelChanged,this),this.channelLabels={},this.$node=$(t),e.forEach(function(t){return function(e){var n,i;return n=e.id.split("-")[1],n?(i=e.name.indexOf("\u2014"),t.channelLabels[e.id]=e.name.substring(i+1)):t.channelLabels[e.id]=e.name}}(this)),Shopify.rootDispatcher.register(Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,this._onChannelChanged).bindToNode(t),this._checkForOtherOrders()}return i.CHANNEL_CHANGED_EVENT=e,i.AFTER_CHANNEL_CHANGED_EVENT=t,i.prototype.setChannel=function(t){return this.currentChannelId=t,Shopify.rootDispatcher.dispatch({type:e,data:this.currentChannelId}),Shopify.UIPopover.deactivate()},i.prototype._onChannelChanged=function(e){return this.currentChannelId=e.data,this.currentChannelLabel=this.channelLabels[this.currentChannelId],Shopify.rootDispatcher.dispatch({type:t,data:this.currentChannelId})},i.prototype._checkForOtherOrders=function(){return Shopify.AnalyticsAPI.query(n).then(function(t){return function(e){var n;return n=e.result.data[0][0]>0,n?t.$node.find(".js-other-channel").removeClass("hide"):void 0}}(this))},i}()}.call(this);var A=(t(function(t,i){"use strict";function r(t,e){$.ajax({url:t,type:"POST",data:e||{}})}Object.defineProperty(i,"__esModule",{value:!0});var o="https://youtube.com/embed",a=function(){function t(e,i){n(this,t),this.$node=$(e),this.options=i,this.videoVisible=!1}return e(t,[{key:"removeVideo",value:function(){this.$node.html(""),this.videoVisible=!1}},{key:"render",value:function(){this.$node.html(""),this.videoVisible=!0,$("<iframe>",{src:o+"/"+this.options.videoId+(this.options.videoParams||""),frameborder:0,allowfullscreen:""}).appendTo(this.$node),r(this.options.trackingUrl,this.options.trackingData)}}]),t}();i["default"]=a,Shopify.YoutubePlayer=null!=i["default"]?i["default"]:i}),t(function(t,i){"use strict";function r(t){var e=document.createElement("iframe");return e.id=t,e.src=o(t),e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",!0),e}function o(t){return s+"/"+t+"?"+u.join("&")+"&autoplay=true&player_id="+t}function a(t,e){$.ajax({url:t,type:"POST",data:e||{}})}Object.defineProperty(i,"__esModule",{value:!0});var s="https://player.vimeo.com/video",u=["title=0","byline=0","portrait=0","api=1"],l=function(){function t(e,i){n(this,t),this.node=e,this.options=i,this.videoVisible=!1}return e(t,[{key:"removeVideo",value:function(){this.videoVisible=!1,this.iframe.remove()}},{key:"render",value:function(){this.iframe=r(this.options.videoId),this.node.appendChild(this.iframe),this.videoVisible=!0,a(this.options.trackingUrl,this.options.trackingData)}}]),t}();i["default"]=l,Shopify.VimeoPlayer=null!=i["default"]?i["default"]:i}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(_),a=i($),s=2,u=250,l=function(){function t(e){n(this,t),this.cleanup=this.cleanup.bind(this),this._consumedCards=this._consumedCards.bind(this),this._recordConsumedCards=this._recordConsumedCards.bind(this),this._resetTimer=this._resetTimer.bind(this),this.throttledFunction=o["default"].throttle(this._resetTimer,u),this.recentlyConsumedCards=new Set,this.requestId=e.requestId,this.$window=a["default"](window),Page.onReplace(a["default"](".page")[0],this.cleanup)}return e(t,[{key:"watch",value:function(){this.$window.on("scroll",this.throttledFunction),this._startTimer()}},{key:"cleanup",value:function(){this._clearTimer(),this.$window.off("scroll",this.throttledFunction)}},{key:"_consumedCards",value:function(){var t=this,e=[];return a["default"](".ui-feed__item--card").each(function(n,i){var r=a["default"](i),o=r.data("handle"),s=r.data("analytics-group"),u=n+1;t._isOnScreen(r)&&!t.recentlyConsumedCards.has(o)&&e.push({handle:o,analytics_group:s,position:u})}),e}},{key:"_recordConsumedCards",value:function(){var t=this,e=this._consumedCards();e.forEach(function(e){return t.recentlyConsumedCards.add(e.handle)}),e.length>0&&this._submitConsumedCards(e)}},{key:"_isOnScreen",value:function(t){var e=a["default"](".header").height()+a["default"]("#turbo").height(),n=this.$window.scrollTop(),i={top:n+e,bottom:n+this.$window.height()},r=t.offset();return r.bottom=r.top+t.outerHeight(),r.top>=i.top&&r.bottom<=i.bottom}},{key:"_startTimer",value:function(){this.timeout=window.setTimeout(this._recordConsumedCards,1e3*s)}},{key:"_clearTimer",value:function(){this.timeout&&window.clearTimeout(this.timeout),this.timeout=null}},{key:"_resetTimer",value:function(){this._clearTimer(),this._startTimer()}},{key:"_submitConsumedCards",value:function(t){a["default"].ajax({url:"/admin/home/consume_cards",data:JSON.stringify({cards:t,original_request_id:this.requestId}),type:"POST",contentType:"application/json"})}}]),t}();r["default"]=l,Shopify.CardConsumption=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";function n(t,e){var n=500,i=400,r=screen.width/2-n/2,o=screen.height/2-i/2,a=["width="+n,"height="+i,"left="+r,"top="+o,"toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=yes","copyhistory=no","resizable=yes"];window.open(t,e,a.join(" "))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,Shopify.CenterPopup=null!=e["default"]?e["default"]:e}),t(function(t,o){"use strict";function a(t,e){d["default"].ajax({url:e,type:"POST",data:t})}Object.defineProperty(o,"__esModule",{value:!0});var s=i(Twine),u=i(_),d=i($),h=r(l),p=i(c),f={VOTE_DIALOG_HEADER:"next-card--home-card-feedback",VOTE_DIALOG_SURVEY:"js-home-vote-dialog-survey",VOTE_DIALOG_UPVOTE_THANKS:"js-home-vote-dialog-upvote-thanks",VOTE_DIALOG_DOWNVOTE_THANKS:"js-home-vote-dialog-downvote-thanks",FEEDBACK_OVERLAY:"home-card-overlay--feedback",FEEDBACK_COMMENT_BOX:"js-feedback-comment",FEEDBACK_OPTION:"wrappable__item",FEEDBACK_OPTION_WRAPPER:"wrappable",UNDO_OVERLAY:"js-home-card-undo-overlay",FEEDBACK_MENU:"js-feedback-menu",DROPDOWN_BUTTON:"js-dropdown-button",CARD:"next-card",HIDE:"hide",POPOVER_BUTTON:"btn--popover-activator"},m={UPVOTE:1,DOWNVOTE:0},g={ANIMATION:200,HIDE_CARD:2500,HIDE_VOTE_DIALOG:1250},y={FEEDBACK_BASE:228,FEEDBACK_REASON:30,FEEDBACK_REASON_SPACING:10,UNDO_OVERLAY:150},v=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.onAction=this.onAction.bind(this),this.hideVoteDialog=this.hideVoteDialog.bind(this),this._hideUndoOverlay=this._hideUndoOverlay.bind(this),this._unregisterOnActionListeners=this._unregisterOnActionListeners.bind(this),this.voteDialogValue=null,this.options=i,this.$node=d["default"](e),this.feedbackHeading="Send feedback",this.$cardNode=this.$node.find("."+f.CARD).first(),this.$voteDialogNode=this.$node.find("."+f.VOTE_DIALOG_HEADER),this.$popoverButtonNode=this.$node.find("."+f.POPOVER_BUTTON),this._registerOnActionListeners(),Page.onReplace(e,this._unregisterOnActionListeners)}return e(t,[{key:"onAction",value:function(t){var e={};u["default"].get(t,"target.dataset.buttonId")&&(e.button_id=u["default"].get(t,"target.dataset.buttonId")),this._trackEvent("register_card_engagement_url",e)}},{key:"dismiss",value:function(){p["default"].deactivate(),this._storeOriginalHeight(),this._resizeToUndoOverlayHeight(),this.$popoverButtonNode.addClass("hide"),this._trackEvent("dismiss_card_url"),this._updateUndoDialog({heading:"You dismissed this card",message:this.options.dismiss_message,action:"dismiss"})}},{key:"upvote",value:function(){this.voteDialogValue=m.UPVOTE,this._trackEvent("upvote_card_url"),this._updateVoteDialogThanks()}},{key:"downvote",value:function(){this.voteDialogValue=m.DOWNVOTE,this._trackEvent("downvote_card_url"),this._updateVoteDialogThanks()}},{key:"showFeedbackDialog",value:function(){p["default"].deactivate(),this.hideAfterFeedback=!1,this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$popoverButtonNode.addClass("hide")}},{key:"showFeedbackDialogFromDismiss",value:function(){this.hideAfterFeedback=!0,this._updateUndoDialog({}),s["default"].refresh(),this._expandFeedbackDialog()}},{key:"showFeedbackDialogFromVote",value:function(){this.hideVoteDialog(),this.hideAfterFeedback=!1,this.voteDialogValue===m.UPVOTE?(this.feedbackHeading="What did you find useful?",this.$node.find("."+f.FEEDBACK_OPTION).addClass("hide"),this.$node.find("."+f.FEEDBACK_OPTION_WRAPPER).addClass("hide"),this.selectedFeedbackOption="This is useful"):(this.$node.find('input[value="This is useful"]').closest("."+f.FEEDBACK_OPTION).addClass("hide"),this.$node.find('input[value="This isn\'t useful"]').prop("checked",!0),this.selectedFeedbackOption="This isn't useful"),this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$node.find("."+f.FEEDBACK_COMMENT_BOX).focus()}},{key:"hideFeedbackDialog",value:function(){this.$node.find("."+f.FEEDBACK_OVERLAY).addClass(f.HIDE),null!==this.voteDialogValue&&(this.$node.find("."+f.FEEDBACK_OPTION).removeClass("hide"),this.voteDialogValue===m.UPVOTE&&(this.$node.find("."+f.FEEDBACK_OPTION_WRAPPER).removeClass("hide"),this.feedbackHeading="Send feedback"),this.voteDialogValue=null),this.selectedFeedbackOption=null,this.selectedFeedbackComment=null}},{key:"cancelFeedbackDialog",value:function(){return this.hideAfterFeedback?void this.hide():(this.hideFeedbackDialog(),this._resizeToOriginalHeight(),void this.$popoverButtonNode.removeClass("hide"))}},{key:"hideVoteDialog",value:function(){this.$voteDialogNode.animate({opacity:0,height:0,"min-height":0},{duration:g.ANIMATIONS})}},{key:"undo",value:function(){"dismiss"===this.undoAction&&(this._trackEvent("undo_dismiss_card_url"),this._hideUndoOverlay())}},{key:"submitFeedback",value:function(){var t=null===this.voteDialogValue?this.options.submit_feedback_url:this.options.card_vote_feedback_url,e={handle:this.options.handle,analytics_group:this.options.analytics_group,feedback:this.selectedFeedbackOption,comment:this.selectedFeedbackComment};return a(e,t),this.hideAfterFeedback?void this.hide():(this.hideFeedbackDialog(),this._resizeToUndoOverlayHeight(),this._updateUndoDialog({heading:"Thanks for your feedback",message:"It will be used to improve your home feed.",action:null}),void setTimeout(this._hideUndoOverlay,g.HIDE_CARD))}},{key:"isFeedbackSelected",value:function(){return this.selectedFeedbackOption||this.selectedFeedbackComment}},{key:"hide",value:function(){var t=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:g.ANIMATION,complete:function(){t.$node.remove(),d["default"](".next-card.overlaid").length||window.location.reload()}})}},{key:"_expandFeedbackDialog",value:function(){var t=this;this.$node.find("."+f.FEEDBACK_OVERLAY).removeClass(f.HIDE),this.$node.find('input[type="radio"].feedback-reason').first().focus();var e=this._feedbackHeight();this.$cardNode.animate({height:e,"min-height":e},{duration:g.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"hidden"})}})}},{key:"_hideUndoOverlay",value:function(){this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass("hide"),this._updateUndoDialog({}),s["default"].refresh()}},{key:"_updateVoteDialogThanks",value:function(){var t=this.voteDialogValue===m.UPVOTE?f.VOTE_DIALOG_UPVOTE_THANKS:f.VOTE_DIALOG_DOWNVOTE_THANKS;this.$voteDialogNode.find("."+f.VOTE_DIALOG_SURVEY).addClass("hide"),this.$voteDialogNode.find("."+t).removeClass("hide")}},{key:"_updateUndoDialog",value:function(t){this.undoHeading=t.heading,this.undoMessage=t.message,this.undoAction=t.action}},{key:"_trackEvent",value:function(t,e){var n=this.options[t],i=u["default"].merge(u["default"].pick(this.options,["handle","analytics_group"]),e);a(i,n)}},{key:"_feedbackHeight",value:function(){var t=this.$node.find("."+f.FEEDBACK_OPTION+":not(."+f.HIDE+")").length,e=t>0?y.FEEDBACK_REASON_SPACING:0;return e+=h.PAGE_CONDENSED.matches?y.FEEDBACK_BASE+y.FEEDBACK_REASON*t:y.FEEDBACK_BASE+y.FEEDBACK_REASON*Math.ceil(t/2)}},{key:"_storeOriginalHeight",value:function(){this.originalHeight=this.$cardNode.height()}},{key:"_resizeToOriginalHeight",value:function(){var t=this;this.$cardNode.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:g.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"",height:"","min-height":""})}})}},{key:"_resizeToUndoOverlayHeight",value:function(){var t=this;this.$cardNode.animate({height:y.UNDO_OVERLAY,"min-height":y.UNDO_OVERLAY},{duration:g.ANIMATION,complete:function(){return t.$cardNode.css({overflow:"hidden"})}})}},{key:"_registerOnActionListeners",value:function(){var t=["a","input[type=submit]","button:not(."+f.FEEDBACK_OVERLAY+" button","."+f.UNDO_OVERLAY+" button","."+f.FEEDBACK_MENU+" button","."+f.DROPDOWN_BUTTON+")"];this.$cardNode.on("click",t.join(", "),this.onAction)}},{key:"_unregisterOnActionListeners",value:function(){this.$cardNode.off("click",this.onAction)}}]),t}();o["default"]=v,Shopify.HomeCard=null!=o["default"]?o["default"]:o})),w=(t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(A),s=function(t){function e(t,i){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return r.$node.find('.btn[href="#"]').on("click",function(t){return t.preventDefault(),r.hide()}),r}return o(e,t),e}(r["default"]);e["default"]=s,Shopify.CustomFeedCard=null!=e["default"]?e["default"]:e}),t(function(t,e){"use strict";function n(){u(),s()}function r(){y(),m()}function o(){E["default"](".page").toggleClass("page--sidebar-is-visible"),setTimeout(function(){return E["default"](window).trigger("resize")})}function a(t){var e=this;this.hidden=!0;var n=t.severity||null,i=n+"-notification-collapsible-container";k["default"].register("collapsible:collapsed",function(t){i===t.data.collapsibleInstance.id&&(e.hidden=!0,A["default"].refresh())}),k["default"].register("collapsible:expanded",function(t){i===t.data.collapsibleInstance.id&&(e.hidden=!1,A["default"].refresh())})}function s(){var t=E["default"](".nav-toggle button"),e=E["default"](".page-home-index")[0];t.on("click",function(){E["default"](".page--sidebar-is-visible").length&&window.Shopify.Home.toggleSidebar()}),Page.onReplace(e,function(){return t.off("click")})}function u(){E["default"]("."+R+" a[tg-remote='delete']").one("click",l)}function l(t){var e=t.currentTarget,n=E["default"](e).closest("."+R),i=E["default"](e).closest("."+x),r=void 0;r=i.children().length<=2?i:n,r.slideUp(150,function(){n.next().is("HR")&&n.next().remove(),n.remove(),0===i.children().length&&i.remove(),w["default"].stop()})}function p(t){E["default"](t.target).closest(".next-card").css("z-index",D)}function f(t){E["default"](t.target).closest(".next-card").css("z-index","")}function m(){var t=E["default"](".ui-feed");t.on(T["default"].EVENTS.ACTIVATING,".ui-popover",p),t.on(T["default"].EVENTS.DEACTIVATED,".ui-popover",f),Page.onReplace(t[0],function(){t.off(T["default"].EVENTS.ACTIVATING),t.off(T["default"].EVENTS.DEACTIVATED)})}function g(t){var e=/\/admin/g;return t.host===window.location.host&&e.test(t.href)}function y(){E["default"](".page-home-index .page__content a").each(function(t,e){var n=!g(e),i=n&&"javascript:"!==e.protocol;if(i||C(e)){var r=E["default"](e);r.attr("target","_blank"),r.addClass("external-link");var o=r.attr("href");r.attr("href",b(o))}})}function v(t){return-1!==t.indexOf("?")}function b(t){var e=t,n="";-1!==e.indexOf("#")&&(n=e.slice(e.indexOf("#")),e=e.slice(0,e.indexOf("#")));var i=v(e);return S(e)||(e=_(e,"utm_source","Shopify",!i),e=_(e,"utm_medium","AdminHomefeed"),e=_(e,"utm_campaign","Homecards")),""+e+n}function _(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;if(-1!==t.indexOf(e))return t;var r=i?"?":"&";return""+t+r+e+"="+n}function S(t){return v(t)&&-1!==t.indexOf("hmac=")}function C(t){var e=!0,n=!1,i=void 0;try{for(var r,o=P[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;if(-1!==t.href.indexOf(a))return!0}}catch(s){n=!0,i=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw i}}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationCard=e.toggleSidebar=e.onFeedLoaded=e.initialize=void 0;var E=i($),A=i(Twine),w=i(d),T=i(c),k=i(h),x="next-card__section",R="notification",D=2,P=["/admin/experts/redirect"];e.initialize=n,e.onFeedLoaded=r,e.toggleSidebar=o,e.NotificationCard=a,Shopify.Home=null!=e["default"]?e["default"]:e}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(_),a=i($),s=i(d),u=function(){function t(e,i){n(this,t),this.onAction=this.onAction.bind(this),this.options=i,this.$node=a["default"](e),this._createOnActionListeners()}return e(t,[{key:"onAction",value:function(){a["default"].ajax({url:this.options.register_card_engagement_url,type:"POST",data:o["default"].pick(this.options,["handle","analytics_group","data"])})}},{key:"hide",value:function(){var t=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:200,complete:function(){t.$node.remove(),s["default"].stop()}})}},{key:"_createOnActionListeners",value:function(){this.$node.find("a").on("click",this.onAction)}}]),t}();r["default"]=u,Shopify.Notification=null!=r["default"]?r["default"]:r})),T=(t(function(t,e){"use strict";function n(t,e){var n=d.isKnownBrowser()&&!d.isMobile()&&(d.isMac()||d.isWindows());n&&(o(s(),h.D_LOWER_CASE,e),$(t).append(u()))}function o(t,e,n){return c["default"].bindCombo([t,e],function(){return a(n)})}function a(t){t.hide(),t.onAction()}function s(){return d.isMac()?h.COMMAND:h.CONTROL}function u(){var t=d.isMac()?"\u2318":"Ctrl";return"Press "+l(t)+" + "+l("D")+" to bookmark your Shopify admin."}function l(t){return'<span class="keyboard-key s-none">'+t+"</span>"}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var c=i(p),d=r(f),h=r(m);Shopify.BookmarkShortcut=null!=e["default"]?e["default"]:e}),t(function(t,s){"use strict";function u(){l["default"](h).each(function(t,e){return l["default"](e).find("input")[0].checked?(l["default"](e).find(p).removeClass("hide"),l["default"](e).find(f).addClass("hide")):(l["default"](e).find(f).removeClass("hide"),l["default"](e).find(p).addClass("hide"))})}Object.defineProperty(s,"__esModule",{value:!0}),s.toggleImage=u;var l=i($),c=i(A),d=r(g),h=".platform-feedback__input-container",p=".platform-feedback__image--select-state",f=".platform-feedback__image--null-state",m=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"submitResult",value:function(t){var e=JSON.parse(t);return"error"in e?d.error(e.error):(d.notice("Thanks for your feedback!"),this.hide())}}]),i}(c["default"]);s["default"]=m,Shopify.QuestionCard=null!=s["default"]?s["default"]:s}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=i(Twine),l=i(w),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"onAction",value:function(){return s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"onAction",this).call(this),u["default"].context(document.body).uploadRequestedDocumentsModal.show()}}]),i}(l["default"]);r["default"]=c,Shopify.RequestedDocumentsNotification=null!=r["default"]?r["default"]:r}),t(function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(e){n(this,t),this.$dataList=$(e).find(".home-data-list")}return e(t,[{key:"showMore",value:function(){var t=this,e=this._truncatedHeight(),n=this._fullHeight();this.$dataList.css("max-height",e),this.$dataList.find(".home-data-list__item.hide").removeClass("hide"),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide"),window.setTimeout(function(){return t.$dataList.addClass("home-data-list--expanded").css("max-height",n)},0)}},{key:"showLess",value:function(){var t=this.$dataList;t.one("transitionend",function(){t.removeClass("home-data-list__wrapper--expanded")}),t.css("max-height",this.truncatedHeight),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide")}},{key:"_truncatedHeight",value:function(){return this.truncatedHeight||(this.truncatedHeight=this.$dataList.height()),this.truncatedHeight}},{key:"_fullHeight",value:function(){if(!this.fullHeight){var t=1,e=this.$dataList.find("li.hide").length,n=this.$dataList.find("li").length-e-t;this.fullHeight=this.truncatedHeight+this.truncatedHeight/n*e}return this.fullHeight}}]),t}();i["default"]=r,Shopify.DataList=null!=i["default"]?i["default"]:i}),t(function(t,r){"use strict";function o(t){t.each(function(t,e){var n=c["default"](e),i=n.find(".ui-feed__item.ui-feed__item--card"),r=s(i);u(i,r),l(n,i)})}function a(t){t.each(function(t,e){d["default"].bind(e)})}function s(t){var e=void 0;return t.toArray().map(function(t,n){return 0===n?(e=t.getBoundingClientRect().top,0):t.getBoundingClientRect().top-e})}function u(t,e){t.each(function(n,i){c["default"](i).css({zIndex:t.length-n,transform:"translateY(-"+e[n]+"px)"})})}function l(t,e){var n="400ms";requestAnimationFrame(function(){t.find(".js-animated-heading").css({opacity:"1"}),e.each(function(t,e){c["default"](e).css({transitionDuration:n,transform:"translateY(0)"}).one(y.transitionEnd(),function(){c["default"](e).css({transitionDuration:"",transform:"",zIndex:""})})})})}Object.defineProperty(r,"__esModule",{value:!0});var c=i($),d=i(Twine),h=5,p=function(){function t(){n(this,t),this.timesRetried=0,this.$feedNode=c["default"](".skeleton-feed")}return e(t,[{key:"loadHomeFeed",value:function(){var t=this;return new Promise(function(e){function n(t){t.$feedNode.find(".skeleton-feed__heading--section").removeClass("skeleton-feed__heading--section").addClass("home-channel-data-error").html("Unable to retrieve Home Feed. Retrying..."),t.timesRetried===h&&t.$feedNode.find(".home-channel-data-error").html("Unable to retrieve Home Feed. Please refresh the page to try again."),setTimeout(function(){t.timesRetried++,t.loadHomeFeed()},1e3*t.timesRetried)}c["default"].ajax({type:"GET",url:"/admin/home/feed",dataType:"html",success:function(i,r,s){if(s.getResponseHeader("Shopify-Auth-Mechanisms"))n(t);else{t.$feedNode.hide().html(i).show(),t.$feedNode.addClass("skeleton-feed--is-loaded");var u=t.$feedNode.find(".ui-feed");o(u),t.$feedNode.one(y.transitionEnd(),function(){c["default"](document).trigger("page:load"),a(u)}),e(i)}},error:function(){n(t)}})})}}]),t}();r["default"]=p,Shopify.Skeleton=null!=r["default"]?r["default"]:r}),t(function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=i(_),s=r(v),u=function(){function t(e,i){n(this,t),this._poll=this._poll.bind(this),this.handleData=this.handleData.bind(this),this.options=e,this.onDataReceived=i,this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX}return e(t,[{key:"startPolling",value:function(){this.timeout=window.setTimeout(this._poll,0)}},{key:"stopPolling",value:function(){window.clearTimeout(this.timeout)}},{key:"handleData",value:function(t){var e=t.result,n=e.data;if(n&&n[0]){var i=this._transformData(n[0]);this._hasChanged(i)?(this.onDataReceived(i),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX):this.pollFrequencyIndex!==this.POLL_FREQUENCIES.length-1&&this.pollFrequencyIndex++}this.timeout=window.setTimeout(this._poll,this.POLL_FREQUENCIES[this.pollFrequencyIndex])}},{key:"_poll",value:function(){return s.query(this._query()).then(this.handleData.bind(this))}},{key:"_query",value:function(){throw new Error("Subclasses of PollableMetric must define a query")}},{key:"_transformData",value:function(t){return t}},{key:"_hasChanged",value:function(t){return this.cachedData&&a["default"].isEqual(t,this.cachedData)?!1:(this.cachedData=t,!0)}}]),t}();o["default"]=u,u.prototype.POLL_FREQUENCIES=[5e3,1e4,3e4,6e4],u.prototype.DEFAULT_POLL_FREQUENCY_INDEX=0,Shopify.PollableMetric=null!=o["default"]?o["default"]:o})),k=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(T),u=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"_query",value:function(){return"SHOW total_sessions FROM visits SINCE today UNTIL today"}},{key:"_transformData",value:function(t){return{totalVisits:t[0]}}}]),i}(s["default"]);r["default"]=u,Shopify.PollableVisitsMetric=null!=r["default"]?r["default"]:r}),x=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(T),u=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"_query",value:function(){return this.options.hasOnlineStore?"SHOW total_sales FROM sales SINCE today UNTIL today":"SHOW total_sales, total_orders FROM sales SINCE today UNTIL today"}},{key:"_transformData",value:function(t){return{totalSales:t[0],totalOrders:t[1]}}}]),i}(s["default"]);r["default"]=u,u.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableSalesMetric=null!=r["default"]?r["default"]:r}),R=(t(function(t,o){"use strict";function a(t,e){return Math.floor(s(t,e))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(t-e)/10}function u(t){return p["default"].withDelimiter(t)}function l(t){return h["default"].format(t,h["default"].moneyUnencodedFormat())}Object.defineProperty(o,"__esModule",{value:!0});var c=i(Twine),d=i($),h=i(Shopify.Money),p=i(Shopify.Number),f=r(b),m=i(k),g=i(x),y=function(){function t(e,i){n(this,t),this.stopPolling=this.stopPolling.bind(this),this._updateData=this._updateData.bind(this);var r=d["default"](e).closest(".page")[0];this.data={totalSales:0,totalOrders:0},this.humanized={},this.salesDataFeed=new g["default"](i,this._updateData),i.hasOnlineStore&&(this.data.totalVisits=0,this.visitsDataFeed=new m["default"](i,this._updateData)),Page.onReplace(r,this.stopPolling),this.startPolling()}return e(t,[{key:"startPolling",value:function(){this.salesDataFeed.startPolling(),this.visitsDataFeed&&this.visitsDataFeed.startPolling()}},{key:"stopPolling",value:function(){this.salesDataFeed.stopPolling(),this.visitsDataFeed&&this.visitsDataFeed.stopPolling()}},{key:"_updateData",value:function(t){var e=0===this.data[Object.keys(t)[0]],n=t[Object.keys(t)[0]]<this.data[Object.keys(t)[0]];return e||n?this._updateValuesAndRefresh(t):this._animateUpdateAndRefresh(t)}},{key:"_animateUpdateAndRefresh",value:function(t){var e=this,n=void 0,i=void 0,r=void 0;t.totalSales&&(r=s(t.totalSales,this.data.totalSales)),t.totalVisits&&(i=a(t.totalVisits,this.data.totalVisits)),t.totalOrders&&(n=a(t.totalOrders,this.data.totalOrders));var o=window.setInterval(function(){return r&&(e.data.totalSales+=r),i&&(e.data.totalVisits+=i),n&&(e.data.totalOrders+=n),e._humanizeDataAndRefresh()},100);return window.setTimeout(function(){
return window.clearInterval(o),e._updateValuesAndRefresh(t)},1e3)}},{key:"_updateValuesAndRefresh",value:function(t){return t.totalSales&&(this.data.totalSales=t.totalSales),t.totalVisits&&(this.data.totalVisits=t.totalVisits),t.totalOrders&&(this.data.totalOrders=t.totalOrders),this._humanizeDataAndRefresh()}},{key:"_humanizeDataAndRefresh",value:function(){return(this.data.totalSales||0===this.data.totalSales)&&(this.humanized.totalSales=l(this.data.totalSales)),(this.data.totalVisits||0===this.data.totalVisits)&&(this.humanized.totalVisits=u(this.data.totalVisits)),(this.data.totalOrders||0===this.data.totalOrders)&&(this.humanized.totalOrders=u(this.data.totalOrders)),this.humanized.date=f.nowShop().moment.format("MMM D"),c["default"].refresh()}}]),t}();o["default"]=y,Shopify.TodayFeature=null!=o["default"]?o["default"]:o}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(Bugsnag),a=function(){function t(e,i){n(this,t),this.task=e,this.checked=i,this.dismissed=!1}return e(t,[{key:"revertCheckedState",value:function(){this.checked=!this.checked,o["default"].notify("GoalTaskCheckFailed","Failed to check")}}]),t}();r["default"]=a,Shopify.GoalTask=null!=r["default"]?r["default"]:r})),D=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i($),a=i(R),s=i(window.SafeLocalStorage),u="goals_overlay-dismissed",l="goals_expanded",c=function(){function t(e,i){var r=i.handle,a=i.id,c=i.locked,d=i.lockUrl,h=i.inProgress,p=i.shopUnlocked,f=i.completionOverlay,m=i.complete;n(this,t),this.$node=o["default"](e),this.id=a,this.handle=r,this.locked=c,this.lockUrl=d,this.shopUnlocked=p,this.tasks={},this.completionOverlay=f,this.overlayKey=u+"_"+r,this.overlayDismissed=s["default"].get(this.overlayKey,!1),this.goalKey=l+"_"+r,this.expanded=this.setDefaultExpandedState(h),this.completionOverlay&&m&&!this.overlayDismissed&&this.showCompletedOverlay()}return e(t,[{key:"isExpanded",value:function(){return this.expanded}},{key:"setDefaultExpandedState",value:function(t){var e="fallback",n=s["default"].get(this.goalKey,e);return n!==e?n:Boolean(t)}},{key:"toggleExpandedState",value:function(){this.locked||(this.expanded=!this.expanded,s["default"].set(this.goalKey,this.expanded))}},{key:"addTask",value:function(t,e){this.tasks[t]=new a["default"](t,e)}},{key:"isChecked",value:function(t){return this.tasks[t]&&this.tasks[t].checked}},{key:"isDismissed",value:function(t){return this.tasks[t]&&this.tasks[t].dismissed}},{key:"isCollapsed",value:function(t){return this.tasks[t]&&this.tasks[t].collapsed}},{key:"allChecked",value:function(){var t=this;return Object.keys(this.tasks).reduce(function(e,n){return e&&(t.isChecked(n)||t.isDismissed(n))},!0)}},{key:"dismissGoal",value:function(){var t=this;this.$node.slideUp(300),o["default"].post(S.dismiss_goal(this.id).html).fail(function(){Shopify.Flash.error("Something went wrong."),t.$node.slideDown(300)})}},{key:"tasksCompleted",value:function(){var t=this;return Object.keys(this.tasks).reduce(function(e,n){return e+t.isChecked(n)},0)}},{key:"numTasks",value:function(){var t=this;return Object.keys(this.tasks).reduce(function(e,n){return e+!t.isDismissed(n)},0)}},{key:"status",value:function(){return this.allChecked()?"COMPLETED":this.tasksCompleted()+" of "+this.numTasks()}},{key:"showDismiss",value:function(){return this.allChecked()||this.shopUnlocked}},{key:"showTaskUndo",value:function(t){return this.tasks[t].dismissed}},{key:"checkGoalCompletion",value:function(){this.completionOverlay&&this.allChecked()&&!this.overlayDismissed&&this.showCompletedOverlay()}},{key:"hideCompletedOverlay",value:function(){this.overlayShown=!1,this.overlayDismissed=!0,s["default"].set(this.overlayKey,this.overlayDismissed)}},{key:"showCompletedOverlay",value:function(){this.expanded=!0,this.overlayShown=!0}},{key:"toggleState",value:function(t,e){var n=this,i=this.tasks[t];i.checked=e.target.checked,e.target.checked?o["default"].post(S.check_goal_task().html,{task_handle:t}).success(function(){n.checkGoalCompletion()}).fail(function(){i.revertCheckedState()}):o["default"].post(S.uncheck_goal_task().html,{task_handle:t}).fail(function(){i.revertCheckedState()})}},{key:"dismissTask",value:function(t){var e=this;this.tasks[t].dismissed=!0,o["default"].post(S.dismiss_goal_task().html,{task_handle:t}).success(function(){e.checkGoalCompletion()})}},{key:"undoDismissTask",value:function(t){this.tasks[t].dismissed=!1,o["default"].post(S.undo_dismiss_goal_task().html,{task_handle:t})}},{key:"collapseTask",value:function(t){this.tasks[t].collapsed=!0}},{key:"lockNavigation",value:function(){this.locked&&this.lockUrl&&!Shopify.Browser.isMobile()&&(document.location=this.lockUrl)}}]),t}();r["default"]=c,Shopify.Goal=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i($),a="dismiss_show_feed_button",s=function(){function t(e,i){var r=i.requestId;n(this,t),this.cardConsumptionRequestId=r,this.$feedNode=o["default"](".skeleton-feed"),this.$node=o["default"](e)}return e(t,[{key:"dismissShowFeedButton",value:function(){var t=this;this.$node.addClass("is-loading").attr("disabled",!0),o["default"].ajax({type:"DELETE",url:"/admin/dismissible_element?"+o["default"].param({handle:a}),success:function(){var e=new Shopify.Skeleton,n=Shopify.Home,i=new Shopify.CardConsumption({requestId:t.cardConsumptionRequestId});i.cleanup(),n.initialize(),e.loadHomeFeed().then(function(){return t.$feedNode.removeClass("hide"),n.onFeedLoaded(),t.$node.addClass("hide"),i.watch(),!0})["catch"](function(){t.$node.removeClass("disabled is-loading").attr("disabled",!0),Shopify.Flash.error("Something went wrong.")})}})}}]),t}();r["default"]=s,Shopify.FeedVisibility=null!=r["default"]?r["default"]:r}),t(function(t,o){"use strict";function a(t,e){var n=t.clone().startOf(e),i=t.clone().endOf(e),r=g;return n.month()===i.month()&&(r=y),n.format(g)+"\u2013"+i.format(r)}Object.defineProperty(o,"__esModule",{value:!0});var s=i(moment),l=i(Twine),d=r(b),p=i(Shopify.Inflection),f=i(c),m=i(h),g="MMM D",y="D",v=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"today";n(this,t),this.onDateChanged=this.onDateChanged.bind(this),this.selectedDate=i,m["default"].register(this.constructor.DATE_CHANGED_EVENT,this.onDateChanged).bindToNode(e),this._initFormattedDates(),this._updateLabel()}return e(t,[{key:"changeDate",value:function(t){return m["default"].dispatch({type:this.constructor.DATE_CHANGED_EVENT,data:t})}},{key:"onDateChanged",value:function(t){var e=!0,n=t.data.split(","),i=u(n,2),r=i[0],o=i[1];return r===o&&(e=this.selectedDate===t.data),this.selectedDate=t.data,this._updateLabel(),e&&f["default"].deactivate(),l["default"].refresh()}},{key:"_updateLabel",value:function(){if(-1===this.selectedDate.indexOf(","))this.dateLabel=p["default"].titleize(this.selectedDate,!0);else{var t=this.selectedDate.split(","),e=u(t,2),n=e[0],i=e[1];if(this.dateLabel=d.fromShop(s["default"](n)).formatInShop(g),n===i)return;s["default"](n).month()===s["default"](i).month()?this.dateLabel+="\u2013"+d.fromShop(s["default"](i)).formatInShop(y):this.dateLabel+="\u2013"+d.fromShop(s["default"](i)).formatInShop(g)}}},{key:"_initFormattedDates",value:function(){var t=d.nowShop().moment;this.formatted={today:t.format(g),yesterday:t.clone().subtract(1,"days").format(g),this_week:a(t,"week"),this_month:a(t,"month")}}}]),t}();v.DATE_CHANGED_EVENT="home:sidebar:date-changed",o["default"]=v,Shopify.HomeSidebarDatepicker=null!=o["default"]?o["default"]:o})),P=t(function(t,l){"use strict";function c(t){return g.fromShop(f["default"](t)).moment.clone()}function d(t){return g.nowShop().moment.clone().startOf(t)}function p(t){return g.nowShop().moment.clone().endOf(t)}Object.defineProperty(l,"__esModule",{value:!0});var f=i(moment),m=i(Shopify.SummaryReport),g=r(b),y=i(Shopify.Money),v=i(Shopify.Number),_=i(D),S=i(h),C="YYYY-MM-DD",E="MMM D",A="D",w=function(t){function i(t,e){n(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return r.channelId=e.channelId,r.homeSidebar=e.homeSidebar,r.widgetViewName=e.widgetViewName,r.widgetErrorMessage=e.widgetErrorMessage,r._newDateSelected=r._newDateSelected.bind(r),r._newDateSelected({data:r.homeSidebar.initialDate}),r.ready=!0,r.URL_REGEX=/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/,S["default"].register(_["default"].DATE_CHANGED_EVENT,r._newDateSelected).bindToNode(t),r}return o(i,t),e(i,[{key:"changeChannelProvider",value:function(t){var e;this.homeSidebar.setActiveChannel(t.data);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];(e=s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"changeChannelProvider",this)).call.apply(e,[this,t].concat(r))}},{key:"formatNumber",value:function(t){return v["default"].withDelimiter(t)}},{key:"formatMoney",value:function(t){return y["default"].format(t,y["default"].moneyUnencodedFormat())}},{key:"formatMoneyCondensed",value:function(t){var e=void 0;return t>=0?y["default"].condensed(t,y["default"].moneyUnencodedFormat()):(e=Math.abs(t),e=y["default"].condensed(e,y["default"].moneyUnencodedFormat()),"\u2212"+e)}},{key:"formatLink",value:function(t){return 0!==t.indexOf("https://")&&0!==t.indexOf("http://")?t:t.substring(t.indexOf("/")+2)}},{key:"formatDate",value:function(t){var e=g.nowShop().moment,n=void 0,i=void 0;switch(t){case"today":return e.format(E);case"yesterday":return e.clone().subtract(1,"day").format(E);case"this_week":i=d("week"),n=p("week");break;case"this_month":i=d("month"),n=p("month");break;default:var r=t.split(","),o=u(r,2),a=o[0],s=o[1];i=c(a),n=c(s)}return i.isSame(n)?""+i.format(E):i.month()===n.month()?i.format(E)+"\u2013"+n.format(A):i.format(E)+"\u2013"+n.format(E)}},{key:"_load",value:function(){if(this.ready&&this.homeSidebar.isActive(this.channelId)){for(var t,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];(t=s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_load",this)).call.apply(t,[this].concat(n))}}},{key:"_newDateSelected",value:function(t){switch(this.homeSidebar.setActiveDate(t.data,this.formatDate(t.data)),t.data){case"today":return this.changeDateRange({data:{startDate:"0d",endDate:"0d"}});case"yesterday":return this.changeDateRange({data:{startDate:"-1d",endDate:"-1d"}});case"this_week":return this.changeDateRange({data:{startDate:d("week").format(C),endDate:p("week").format(C)}});case"this_month":return this.changeDateRange({data:{startDate:d("month").format(C),endDate:p("month").format(C)}});default:var e=t.data.split(","),n=u(e,2),i=n[0],r=n[1];return this.changeDateRange({data:{startDate:i,endDate:r}})}}}]),i}(m["default"]);l["default"]=w,Shopify.HomeSidebarReport=null!=l["default"]?l["default"]:l}),N=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(_),u=i(P),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_host\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var r=i.map(function(t){return{referrerURL:function(){return null==t[0].match(e.URL_REGEX)?void 0:"http://"+e.formatLink(t[0])}(),referrerName:e.formatLink(t[0]),referrerCount:l["default"].condensed(t[1]),percentage:e._formatPercentage(t[1]/n)}}),o=r.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:o})}},{key:"_formatPercentage",value:function(t){return Math.floor(100*t)+"%"}}]),i}(u["default"]);r["default"]=c,c.prototype.renderError=s["default"].noop,Shopify.HomeTopReferrersReport=null!=r["default"]?r["default"]:r}),I=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(N),u=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalEmbeds:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topEmbeds:"SHOW total_visitors BY embedded_path\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}}]),i}(s["default"]);r["default"]=u,Shopify.HomeBuyButtonTopEmbedLinksReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),u=i(Shopify.Number),l=i(Shopify.Money),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{topProducts:"SHOW gross_sales, total_quantity\n         BY product_id, product_title, variant_title\n         FROM sales\n         "+this.queryProps.channelFilter+" "+(this.queryProps.channelFilter?"AND":"WHERE")+" sale_line_type == 'product'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_quantity DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result.data;if(!e.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=e.map(function(t,n){return{id:t[0],name:t[1],variant:"Default Title"===t[2]?null:t[2],sales:l["default"].format(t[3],l["default"].moneyUnencodedFormat()),metric:u["default"].condensed(t[4]),isLastEntry:n===e.length-1}});this.append(this.resultTemplate,{products:n})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=c,Shopify.HomeTopProductsReport=null!=r["default"]?r["default"]:r})),O=t(function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var u=i($),l=i(I),c=r(S),d=i(Shopify.Number),h=function(t){function i(t,e){n(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return r.channelId=e.channelId,r.channelName=e.channelName,r.homeSidebar=e.homeSidebar,r.widgetViewName=e.widgetViewName,r.queryProps.channelName=r.channelName,r}return o(i,t),e(i,[{key:"queries",value:function(){return{topProducts:"SHOW total_views BY product_id\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_views DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var i=n.map(function(t){return t[0]});this._loadProductTitles(i).then(function(t){return n.map(function(e,i){return{id:e[0],views:d["default"].condensed(e[1]),name:t[e[0]],isLastEntry:i===n.length-1}})}).then(function(t){return e.append(e.resultTemplate,{products:t})}).fail(this.renderError.bind(this))}},{key:"_loadProductTitles",value:function(t){return u["default"].ajax({url:c.products().json+"?ids="+t.join(",")+"&fields=id,title",type:"GET",dataType:"json"}).then(function(t){var e={};return t.products.forEach(function(t){e[t.id]=t.title}),e})}}]),i}(l["default"]);s["default"]=h,Shopify.HomeTopViewedProductsReport=null!=s["default"]?s["default"]:s}),L=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(O),u=i(Shopify.Number),l=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{topProducts:"SHOW total_visitors BY product_id\n         FROM buy_button_impression\n         WHERE product_id != 0\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var i=n.map(function(t){return t[0]});this._loadProductTitles(i).then(function(t){return n.map(function(e,i){return{id:e[0],views:u["default"].condensed(e[1]),name:t[e[0]],isLastEntry:i===n.length-1}})}).then(function(t){return e.append(e.resultTemplate,{products:t})}).fail(this.renderError.bind(this))}}]),i}(s["default"]);r["default"]=l,Shopify.HomeBuyButtonTopViewedProductsReport=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";function n(t,e){var n=Math.abs(e-t);if(0>t){var i=1+1/S.yAxisTickCount;n*=i}var r=n/(S.yAxisTickCount-1);r=a(r,s(r)/2,n);var o=Math.ceil(Math.abs(t)/r);return y["default"]({from:0,to:S.yAxisTickCount,inclusive:!1}).map(function(t,e){return(e-o)*r}).reverse()}function o(t,e){var n=t.map(function(t,n){return{value:e(t),visible:n%2===0}});return n}function a(t,e,n){var i=Math.floor(n);if(i<=S.yAxisRange.small)return S.yAxisStepInterval.small;if(i<=S.yAxisRange.medium)return S.yAxisStepInterval.medium;var r=Math.ceil(t),o=r%e,a=Math.round(r+e-o);return Math.max(a,S.yAxisStepInterval.large)}function s(t){return Math.pow(10,Math.ceil(t).toString().length-1)}function l(t){function e(t,e){var n=u(e,2),i=(n[0],n[1]);return Math.min(t,i)}return Math.min(0,t.reduce(e,0))}function c(t){function e(t,e){var n=u(e,2),i=(n[0],n[1]);return Math.max(t,i)}return Math.max(0,t.reduce(e,0))}function d(t){var e="hour"===t.columns[0].field,n=E.day;e&&(n+=" "+E.hour);var i=e?E.hour:E.dayCondensed;return{tooltipDateFormat:n,xAxisDateFormat:i}}function h(t){return t>S.removeSpacingBreakpoint?0:t>S.reduceSpacingBreakpoint?1:Math.max(Math.floor(S.reduceSpacingBreakpoint/t),2)}function p(t,e){var n=Math.abs(t)/e*S.height;return Math.round(Math.max(n,S.minBarHeight))}function f(t,e){var n=Math.round(100*t/e);return n=Math.max(n,S.minTooltipPositionPercent),n=Math.min(n,S.maxTooltipPositionPercent)}function m(t){var e=[0,t-1];if(t>=7)e.push(Math.floor(Number(t)/3)),e.push(Math.floor(2*t/3));else{var n=!0,i=!1,r=void 0;try{for(var o,a=y["default"]({from:1,to:t-2,inclusive:!0})[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s)}}catch(u){i=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}}return e}Object.defineProperty(e,"__esModule",{value:!0});var g=i(_),y=i(C),v=r(b),S={height:101,minBarHeight:2,minGraphHeight:10,minTooltipPositionPercent:10,maxTooltipPositionPercent:90,fixXAxisBreakpoint:20,reduceSpacingBreakpoint:40,removeSpacingBreakpoint:90,yAxisTickCount:6,yAxisNoDataStepHeight:1,yAxisLowDataStepHeight:2,yAxisStepInterval:{small:1,medium:2,large:5},yAxisRange:{small:5,medium:10}},E={day:"MMMM D, YYYY",dayCondensed:"MMM D",hour:"ha"};e["default"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0;if(!(e=t.dataFormatters))throw new Error("HomeGraphHelper requires dataFormatters to format values and the y-axis.");return function(i){var r=i.data.length,a=S.height/(S.yAxisTickCount-1),s=n(l(i.data),c(i.data)),y=s[0],b=g["default"].last(s),_=y-b,C={type:t.type||"sales",hasManyPoints:r>S.fixXAxisBreakpoint,barSpacing:h(r),bars:[],originPosition:Math.round(s.indexOf(0)*a),xAxis:[],yAxis:o(s,e.formatYAxisValue)},E=v.nowShop().moment,A=d(i),w=A.tooltipDateFormat,T=A.xAxisDateFormat;return i.data.forEach(function(t,n){var i=u(t,3),o=i[0],a=i[1],s=i[2],l=void 0,c=void 0,d=v.fromShop(o).moment.isAfter(E);return d||(c={date:v.fromShop(o).moment.format(w),horizontalPosition:f(n,r),primaryValue:e.formatPrimaryValue(a)},e.formatSecondaryValue&&(c.secondaryValue=e.formatSecondaryValue(s))),C.bars.push({rawValue:a,height:p(a,_),tooltip:c,inFuture:d}),m(r).includes(n)&&(l=v.fromShop(o).moment.format(T)),C.xAxis.push(l||"")}),C}},Shopify.HomeGraphTransformer=null!=e["default"]?e["default"]:e})),M=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),u=i(L),l=i(Shopify.Number),c=i(Shopify.Inflection),d=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{visits:"SHOW total_sessions, total_visitors\n         OVER "+e+"(viewed_at)\n         AS "+e+"\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC",totalVisits:"SHOW total_sessions\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t=this,e={formatPrimaryValue:function(e){return t.formatNumber(e)+" "+c["default"].pluralize(e,"visit")},formatSecondaryValue:function(e){return t.formatNumber(e)+" visitors"},formatYAxisValue:function(t){return l["default"].condensed(t)}};this.transformGraphData=u["default"]({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[1].result.data,n=t[2].result.data;n?this.append(this.resultTemplate,{visits:l["default"].withDelimiter(e),visitors:l["default"].withDelimiter(n),graph:this.transformGraphData(t[0].result)}):this.append(this.noDataTemplate)}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=d,Shopify.HomeBuyButtonVisitorsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";function s(t){t.stopPropagation()}Object.defineProperty(r,"__esModule",{value:!0});var l=i(Twine),c=i(_),d=i($),p=i(P),f=i(Shopify.Number),m=i(Shopify.Money),g=i(Shopify.SummaryReportChannelpicker),y=i(h),v=i(Shopify.Inflection),b="2",S=function(t){function i(t,e){n(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return r.channels=e.channels.filter(function(t){return"All channels"!==t.name}),r.displayDashboardLink=e.displayDashboardLink,r}return o(i,t),e(i,[{key:"queries",value:function(){var t=this,e={};return this.channels.forEach(function(n){return e[n.name+"-"+n.id]=t._salesAndOrdersQuery(n.id),e[n.name+"-"+n.id]}),e}},{key:"initializeView",value:function(){d["default"](".page__sidebar").on("click",".home-channel-summary__link",s),this.resultTemplate=this.createTemplate(".js-template-success"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=this,n={};this.channels.forEach(function(i,r){var o=u(t[r].result.data[0],2),a=o[0],s=o[1];i.id[0]===b&&(i.name=e._formatChannelDisplayName(i)),n[i.name+"-"+i.id]=c["default"].assign(i,{sales:""+e._formatMoney(a),orders:e._formatNumber(s)+" "+v["default"].pluralize(s,"order")})});var i=this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,channels:n,displayDashboardLink:this.displayDashboardLink});l["default"].bind(i.find(".js-button-wrapper")[0]),this._injectIcons(n)}},{key:"changeChannel",value:function(t){y["default"].dispatch({type:g["default"].CHANNEL_CHANGED_EVENT,data:t})}},{key:"_salesAndOrdersQuery",value:function(t){var e=t.split("-"),n=u(e,2),i=n[0],r=n[1],o="WHERE channel_provider_id == "+i;return r&&(o+=" AND location_id == "+r),'\n       SHOW\n         total_sales AS "sales '+t+'",\n         total_orders AS "orders '+t+'"\n       FROM sales\n       '+o+"\n       SINCE "+this.queryProps.startDate+"\n       UNTIL "+this.queryProps.endDate}},{key:"_injectIcons",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.channels[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,a=d["default"](".icon-for-"+c["default"].kebabCase(o.id)),s=o.svg_icon_html;a&&s&&a.html(s)}}catch(u){e=!0,n=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}}},{key:"_formatMoney",value:function(t){return m["default"].format(t,m["default"].moneyUnencodedFormat())}},{key:"_formatNumber",value:function(t){return f["default"].condensed(t)}},{key:"_formatChannelDisplayName",value:function(t){return t.name.replace(/Point of sale/,"Shopify POS")}}]),i}(p["default"]);r["default"]=S,S.prototype.renderError=c["default"].noop,Shopify.HomeChannelsSummaryReport=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(P),s=function(t){function e(t,i){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return r.channelId=i.channelId,r.channelName=i.channelName,r.homeSidebar=i.homeSidebar,r.queryProps.channelName=r.channelName,r}return o(e,t),e}(r["default"]);e["default"]=s,Shopify.HomeSidebarEngagementsReport=null!=e["default"]?e["default"]:e})),B=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(M),l=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{views:'SHOW total_views, total_clicks\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:'SHOW total_orders\n         FROM sales\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=u(t[0].result.data[0],2),n=e[0],i=e[1],r=t[1].result.data[0][0];if(0===n)return void this.append(this.noDataTemplate);var o={reachedCheckout:i.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(i/n),purchased:r.toLocaleString(),purchasedPercentage:this._formatPercentage(r/n)};this.append(this.resultTemplate,o)}},{key:"renderError",value:function(){this.append(this.errorTemplate)}},{key:"_formatPercentage",value:function(t){return(100*t).toFixed(2)+"%"}}]),i}(s["default"]);r["default"]=l,Shopify.HomeConversionReport=null!=r["default"]?r["default"]:r}),F=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),l=4,c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{postEngagement:"SHOW\n           total_impressions,\n           total_views,\n           total_favorites,\n           total_shares,\n           total_comments\n         FROM daily_channel_post_engagement_facts\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,adEngagement:"SHOW\n           total_ad_spend,\n           total_referred_order_value,\n           total_referred_order_count\n         FROM daily_channel_ad_engagement_facts\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,facebookSales:"SHOW\n           total_sales,\n           total_orders\n         FROM sales\n         WHERE channel_provider_id == "+l+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];return t+e}var n=t[0].result.data[0],i=t[1].result.data[0],r=t[2].result.data[0];if(0===n.reduce(e)&&0===i.reduce(e))return void this.append(this.noDataTemplate);var o=i[0],a=u(r,2),s=a[0],l=a[1],c=i.slice(1),d=u(c,2),h=d[0],p=d[1],f=l||p?o/(l+p):0,m=o>0?(s+h)/o:0;this.append(this.resultTemplate,{reach:this.formatNumber(n[0]),engagement:{clicks:this.formatNumber(n[1]),likesCommentsShares:this.formatNumber(n.slice(2,5).reduce(e))},ads:{facebookSales:this.formatMoney(s),offsiteSales:this.formatMoney(h),averageCostPerSale:this.formatMoney(f),returnPerDollarSpent:this.formatMoney(m),totalSpent:this.formatMoney(o)}})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=c,Shopify.HomeFacebookReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(_),u=i(P),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalMarketingCampaigns:"SHOW total_sessions\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topMarketingCampaigns:"SHOW total_sessions\n         BY utm_campaign_name\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var r=i.map(function(t){return{referrerName:t[0],referrerCount:l["default"].condensed(t[1]),percentage:e._formatPercentage(t[1]/n)}});this.append(this.resultTemplate,{referrers:r})}},{key:"_formatPercentage",value:function(t){return Math.floor(100*t)+"%"}}]),i}(u["default"]);r["default"]=c,c.prototype.renderError=s["default"].noop,Shopify.HomeMarketingCampaignsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(B),l=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{sessionsFunnel:"SHOW total_sessions, total_carts, total_reached_checkouts\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:"SHOW total_orders\n         FROM sales\n         WHERE api_client_title == 'Online Store'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"renderResult",value:function(t){var e=u(t[0].result.data[0],3),n=e[0],i=e[1],r=e[2],o=t[1].result.data[0][0];if(0===n)return void this.append(this.noDataTemplate);var a={addsToCart:i.toLocaleString(),addsToCartPercentage:this._formatPercentage(i/n),reachedCheckout:r.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(r/n),purchased:o.toLocaleString(),purchasedPercentage:this._formatPercentage(o/n)};this.append(this.resultTemplate,a)}}]),i}(s["default"]);r["default"]=l,Shopify.HomeOnlineStoreConversionReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";function o(){return c["default"].get(m,p)}Object.defineProperty(r,"__esModule",{value:!0});var a=i($),s=i(Twine),u=i(Shopify.SummaryReportChannelpicker),l=i(h),c=i(window.SafeLocalStorage),d="today",p="all",f="homeSidebarDate",m="homeSidebarChannel",g="cid",y=function(){
function t(e,i){n(this,t),this._updateChannelPicker=this._updateChannelPicker.bind(this),this._initialShowEvent=this._initialShowEvent.bind(this),this._showPickers=this._showPickers.bind(this),this.setActiveChannel=this.setActiveChannel.bind(this),this.node=e;var r=i.map(function(t){return t.id});this.currentChannelId=this._getInitialChannelId(r),this.initialDate=c["default"].get(f,d),l["default"].register(u["default"].AFTER_CHANNEL_CHANGED_EVENT,this._initialShowEvent),setTimeout(this._updateChannelPicker,0)}return e(t,[{key:"setActiveDate",value:function(t,e){this.formattedDate=e,c["default"].set(f,t)}},{key:"setActiveChannel",value:function(t){this.currentChannelId=t,c["default"].set(m,this.currentChannelId)}},{key:"isActive",value:function(t){return t===this.currentChannelId}},{key:"_updateChannelPicker",value:function(){this._setChannelPickerLabel()}},{key:"_setChannelPickerLabel",value:function(){l["default"].dispatch({type:u["default"].CHANNEL_CHANGED_EVENT,data:this.currentChannelId})}},{key:"_initialShowEvent",value:function(t){t.data===this.currentChannelId&&(s["default"].refresh(),this._showPickers(),l["default"].remove(u["default"].CHANNEL_CHANGED_EVENT,this._initialShowEvent))}},{key:"_showPickers",value:function(){return a["default"](this.node).removeClass("next-card--home-channel-filters--loading")}},{key:"_getInitialChannelId",value:function(t){for(var e=[this._channeldIdFromUrl,o],n=0;n<e.length;n++){var i=e[n],r=i.call(this);if(-1!==t.indexOf(r))return r}return p}},{key:"_channeldIdFromUrl",value:function(){var t=this._urlParams().filter(function(t){var e=t.split("=")[0];return e===g})[0];if(t){var e=t.split("=")[1];return decodeURIComponent(e)}return null}},{key:"_urlParams",value:function(){return window.location.search.substring(1).split("&")}}]),t}();r["default"]=y,Shopify.HomeSidebar=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(moment),a=i(_),s=i($),l=i(E),c=i(C),d=i(D),p=i(h),f="MMMM YYYY",m="e",g="YYYY-MM-DD",y=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=function(){function t(e,i){n(this,t),this.$calendar=s["default"](e).find(".js-home-calendar"),this._initTemplate(e),this._initEvents(e),this._loadDateRange({data:i.selectedDate})}return e(t,[{key:"nextMonth",value:function(){return this._loadMonthFor(this.lastOfMonth.add(1,"day"))}},{key:"prevMonth",value:function(){return this._loadMonthFor(this.firstOfMonth.subtract(1,"day"))}},{key:"_initTemplate",value:function(t){var e=s["default"](t).find(".js-template-calendar").remove();return this.template=a["default"].template(e.html()),this.template}},{key:"_initEvents",value:function(t){var e=this;p["default"].register(d["default"].DATE_CHANGED_EVENT,this._loadDateRange.bind(this)).bindToNode(t),this.$calendar.on("click",".btn",this._dateClicked.bind(this)),l["default"].onReplace(t,function(){return e.$calendar.off("click")})}},{key:"_loadDateRange",value:function(t){var e=t.data,n=o["default"]().startOf("day");switch(e){case"today":this.fromMoment=n,this.toMoment=n;break;case"yesterday":this.fromMoment=n.clone().subtract(1,"day"),this.toMoment=n.clone().subtract(1,"day");break;case"this_week":this.fromMoment=n.clone().startOf("week"),this.toMoment=n.clone().endOf("week").startOf("day");break;case"this_month":this.fromMoment=n.clone().startOf("month"),this.toMoment=n.clone().endOf("month").startOf("day");break;default:var i=e.split(","),r=u(i,2),a=r[0],s=r[1];this.fromMoment=o["default"](a),this.toMoment=o["default"](s)}return this._loadMonthFor(this.fromMoment)}},{key:"_render",value:function(t){var e={weeks:t,monthName:this.monthName,DAYS_OF_THE_WEEK:y};return this.$calendar.empty(),this.$calendar.append(this.template(e))}},{key:"_dateClicked",value:function(t){t.stopPropagation();var e=t.target.innerHTML.trim(),n=o["default"](new Date(this.firstOfMonth.year(),this.firstOfMonth.month(),e));return this.toMoment.isSame(this.fromMoment)&&n.isSame(this.toMoment)?this._updateDatepicker():this.toMoment.isSame(this.fromMoment)&&n.isAfter(this.fromMoment)?(this.toMoment=n,this._updateDatepicker()):(this.fromMoment=n,this.toMoment=n,this._updateDatepicker())}},{key:"_updateDatepicker",value:function(){var t=this.fromMoment.format(g)+",";return t+=""+this.toMoment.format(g),p["default"].dispatch({type:d["default"].DATE_CHANGED_EVENT,data:t})}},{key:"_loadMonthFor",value:function(t){var e=[],n={},i=0;this.firstOfMonth=t.clone().startOf("month"),this.lastOfMonth=t.clone().endOf("month");var r=this.firstOfMonth.format(m);for(this.monthName=t.format(f);r>i;)n[y[i]]={date:""},i++;var o=!0,a=!1,s=void 0;try{for(var u,l=c["default"]({from:1,to:this.lastOfMonth.date(),inclusive:!0})[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var d=u.value,h=this.firstOfMonth.clone().add(d-1,"days");n[y[i]]=this._dateWithMetadata(h),i++,7===i&&(i=0,e.push(n),n=d===this.lastOfMonth.date()?null:{})}}catch(p){a=!0,s=p}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}if(n){for(;7>i;)n[y[i]]={date:""},i++;e.push(n)}return this._render(e)}},{key:"_dateWithMetadata",value:function(t){return{date:t.date(),isStart:t.isSame(this.fromMoment),isEnd:t.isSame(this.toMoment),isSelected:t.isAfter(this.fromMoment)&&t.isBefore(this.toMoment)}}}]),t}();r["default"]=v,Shopify.HomeSidebarCalendar=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(_),u=i(P),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topCountries:"SHOW total_sessions\n         BY location_country\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var r=i.map(function(t){return{referrerName:t[0]||"Unknown",referrerCount:l["default"].condensed(t[1]),percentage:e._formatPercentage(t[1]/n)}}),o=r.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:o})}},{key:"_formatPercentage",value:function(t){return Math.floor(100*t)+"%"}}]),i}(u["default"]);r["default"]=c,c.prototype.renderError=s["default"].noop,Shopify.HomeTopCountriesReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(_),u=i(P),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,landingPages:"SHOW total_sessions\n         BY page_path, host(page_url)\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var r=i.map(function(t){return{referrerURL:"http://"+t[1]+t[0],referrerName:e.formatLink(t[0])||"Frontpage ("+e.formatLink(t[1])+")",referrerCount:l["default"].condensed(t[2]),percentage:e._formatPercentage(t[2]/n)}}),o=r.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:o})}},{key:"_formatPercentage",value:function(t){return Math.floor(100*t)+"%"}}]),i}(u["default"]);r["default"]=c,c.prototype.renderError=s["default"].noop,Shopify.HomeTopLandingPagesReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(_),u=i(P),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topSearchTerms:"SHOW total_sessions\n         BY referrer_terms\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(t){var e=this,n=t[0].result.data[0][0],i=t[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var r=i.map(function(t){return{referrerName:e.formatLink(t[0]),referrerCount:l["default"].condensed(t[1]),percentage:e._formatPercentage(t[1]/n)}}),o=r.filter(function(t){return"0%"!==t.percentage});this.append(this.resultTemplate,{referrers:o})}},{key:"_formatPercentage",value:function(t){return Math.floor(100*t)+"%"}}]),i}(u["default"]);r["default"]=c,c.prototype.renderError=s["default"].noop,Shopify.HomeTopSearchReferrersReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(N),u=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_name\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}}]),i}(s["default"]);r["default"]=u,Shopify.HomeTopSocialReferrersReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),u=i(Shopify.Money),l=i(Shopify.Number),c="Point of Sale",d=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){var t=this.channelId.split("-")[1];return{topStaff:"SHOW total_orders, total_sales\n         BY employee_id, employee_name\n         FROM sales\n         WHERE api_client_title == '"+c+"'\n         AND location_id == "+t+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_orders DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result.data;if(!e.length)return void this.append(this.noDataTemplate);var n=e.map(function(t,n){return{id:t[0],name:t[1],orderCount:l["default"].condensed(t[2]),totalSales:u["default"].format(t[3],u["default"].moneyUnencodedFormat()),average:t[2]?"$"+u["default"].formatWithDelimiters(t[3]/t[2]):"$0.00",isLastEntry:n===e.length-1}});this.append(this.resultTemplate,{staffMembers:n})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=d,Shopify.HomeTopStaffReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(M),u=i(L),l=i(Shopify.Number),c=i(Shopify.Inflection),d=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){return{views:"SHOW total_views\n         OVER day(occurred_on)\n         AS day\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY day ASC",totalViews:"SHOW total_views\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t=this,e={formatPrimaryValue:function(e){return t.formatNumber(e)+" "+c["default"].pluralize(e,"view")},formatYAxisValue:function(t){return l["default"].condensed(t)}};this.transformGraphData=u["default"]({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result;if(!e.data.length)return void this.append(this.noDataTemplate);var n=l["default"].withDelimiter(t[1].result.data[0][0]),i=c["default"].pluralize(n,"view");this.append(this.resultTemplate,{views:n+" "+i,graph:this.transformGraphData(e)})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=d,Shopify.HomeViewsReport=null!=r["default"]?r["default"]:r}));t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(F),u=i(L),l=i(Shopify.Number),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,visits:"SHOW total_sessions, total_visitors\n         OVER "+e+"(timestamp)\n         AS "+e+"\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC"}}},{key:"initializeView",value:function(){var t=this,e={formatPrimaryValue:function(e){return t.formatNumber(e)+" visits"},formatSecondaryValue:function(e){return t.formatNumber(e)+" visitors"},formatYAxisValue:function(t){return l["default"].condensed(t)}};this.transformGraphData=u["default"]({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result.data,n=t[1].result.data;return n?void this.append(this.resultTemplate,{visits:l["default"].withDelimiter(e),visitors:l["default"].withDelimiter(n),graph:this.transformGraphData(t[2].result)}):void this.append(this.noDataTemplate)}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=c,Shopify.HomeOnlineStoreVisitorsReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),u=i(Shopify.Money),l=i(Shopify.Inflection),c=i(Shopify.Number),d=i(L),h=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{sales:"SHOW total_sales\n         OVER "+e+"(processed_at)\n         AS "+e+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC",totalSalesAndOrders:"SHOW total_sales, total_orders\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var t=this,e={formatPrimaryValue:function(e){return t.formatMoney(e)},formatYAxisValue:function(e){return t.formatMoneyCondensed(e)}};this.transformGraphData=new d["default"]({dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(t){var e=t[0].result;if(!e.data.length)return void this.append(this.noDataTemplate);var n=t[1].result,i=c["default"].withDelimiter(n.data[0][1]),r=l["default"].pluralize(n.data[0][1],"order");this.append(this.resultTemplate,{total:u["default"].format(n.data[0][0],u["default"].moneyUnencodedFormat()),orders:i+" "+r,graph:this.transformGraphData(e)})}},{key:"renderError",value:function(){this.append(this.errorTemplate)}}]),i}(s["default"]);r["default"]=h,Shopify.HomeSalesReport=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(P),l=i(Shopify.Money),c=function(t){function i(){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"queries",value:function(){var t=this.queryProps.startDate===this.queryProps.endDate,e=t?"hour":"day";return{totalSalesBreakdown:'SHOW\n           total_sales,\n           orders,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "order") THEN amount_after_discounts_after_tax)) AS order_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "return") THEN amount_after_discounts_after_tax)) AS returns_amount,\n           count(DISTINCT (IF (sale_kind == "return") THEN order_id)) AS returns_count\n         OVER '+e+"(processed_at)\n         AS "+e+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+e+" ASC"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success")}},{key:"renderResult",value:function(t){var e=t[0].result;if(!e.data.length)return void this.$node.hide();var n=u(e.summary,6),i=n[1],r=n[3],o=n[4],a=n[5];a>0?(this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,totalSales:l["default"].format(i,l["default"].moneyUnencodedFormat()),sales:l["default"].format(r,l["default"].moneyUnencodedFormat()),returnsAmount:l["default"].format(o,l["default"].moneyUnencodedFormat())}),this.$node.show()):this.$node.hide()}},{key:"renderError",value:function(){this.$node.hide()}}]),i}(s["default"]);r["default"]=c,Shopify.HomeTotalSalesBreakdown=null!=r["default"]?r["default"]:r});(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SocialMarketingFrame=function(){function e(e,n){this.node=e,this.url=n,this.receive=t(this.receive,this),this.show=t(this.show,this),this.onLoad=t(this.onLoad,this),this.context=Twine.context(document.body),Shopify.rootDispatcher.register("SocialMarketingFrameOpen",this.show).bindToNode(this.node),window.addEventListener("message",this.receive)}return e.prototype.loaded=!1,e.prototype.onLoad=function(t){return""!==t.target.src&&(this.loaded=!0),Twine.refresh()},e.prototype.show=function(t){return null==t&&(t={}),null!=t.url?this.src=t.url:this.src=this.url,t.funnel&&(this.src=Shopify.UrlMangler.addQuery(Shopify.UrlMangler.getURL(this.src),{funnel:t.funnel})),Twine.refresh(),this.context.SocialMarketingModal.show()},e.prototype.receive=function(t){var e,n;try{e=JSON.parse(t.data)}catch(i){return}return e.closeMarketingModal&&(this.context.SocialMarketingModal.hide(),this.src="",this.loaded=!1),e.marketingFrameHeight&&(n=window.innerHeight-40,this.height=e.marketingFrameHeight<n?e.marketingFrameHeight:n),Twine.refresh()},e}()}).call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};t="a, input, button, [data-bind-event-click], [aria-haspopup], td.select, .ui-popover *",e=function(t){return"undefined"!=typeof Page&&null!==Page?Page.visit(t):location.href=t},Shopify.NestedLinkContainer=function(){function i(t){var e;this.node=t,this.linkTo=n(this.linkTo,this),e=$(this.node),this.href=e.find("a[data-nested-link-target]")[0].href,e.on("click",this.linkTo)}return i.BLACK_LIST=t,i.prototype.linkTo=function(n){return $(n.target).filter(t).length>0||this._hasSelection()?void 0:e(this.href)},i.prototype._hasSelection=function(){return window.getSelection().toString().length>0},i}()}.call(this);(function(){var t,e,n,i,r,o,a,s,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}};t={TYPE:"data-collapsible",STATE:"data-collapsible-state",MAX_WIDTH:"data-collapsible-maxwidth",HIDDEN:"aria-hidden",BTN:{TARGET:"data-collapsible-target",EXPANDED:"aria-expanded",TEXT:{EXPANDED:"data-collapsible-text--expanded",COLLAPSED:"data-collapsible-text--collapsed"},ICON:{EXPANDED:"data-collapsible-icon--expanded",COLLAPSED:"data-collapsible-icon--collapsed"}}},e={BTN:{TEXT:"btn__text",ICON:"icon"}},i="collapsible:collapsed",r="collapsible:expanded",a={},u=function(t){return a[t.id]},o={},s=function(e){return o[e.getAttribute(t.BTN.TARGET)]},Shopify.Collapsible=function(){function e(e){var n;this.node=e,this._finishTransition=c(this._finishTransition,this),this._getHeight=c(this._getHeight,this),this.node,this.id=this.node.id,this.id&&(this.collapsed="collapsed"===this.node.getAttribute(t.STATE),this.dismissible="dismissible"===this.node.getAttribute(t.TYPE),n=this.node.getAttribute(t.MAX_WIDTH),this.maxwidth=n?parseInt(n,10):void 0,this.activator=null,this._pairActivator(),this._toggleAtWidth(),this._trackWidthResize())}return e.DISPATCHER_COLLAPSED_ACTION=i,e.DISPATCHER_EXPANDED_ACTION=r,e._collapsibleRefs=a,e.getCollapsibleRefForNode=u,e._activatorRefs=o,e.getActivatorForNode=s,e.prototype.toggle=function(t){return null==t&&(t=!0),this.collapsed?this.expand(t):this.collapse(t)},e.prototype.expand=function(e){return null==e&&(e=!0),this.collapsed?(this.activator&&this.activator.expand(),e?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(e){return function(){return e.collapsed=!1,e.node.setAttribute(t.STATE,"expanded"),e.node.setAttribute(t.HIDDEN,"false"),Shopify.rootDispatcher.dispatch(e._generateTransitionEvent())}}(this))):(this.collapsed=!1,this.node.setAttribute(t.STATE,"expanded"),this.node.setAttribute(t.HIDDEN,"false"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()))):this},e.prototype.collapse=function(e){return null==e&&(e=!0),this.collapsed?this:(this.activator&&this.activator.collapse(),e?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(e){return function(){return e.collapsed=!0,e.node.setAttribute(t.STATE,"collapsed"),e.node.setAttribute(t.HIDDEN,"true"),Shopify.rootDispatcher.dispatch(e._generateTransitionEvent())}}(this))):(this.collapsed=!0,this.node.setAttribute(t.STATE,"collapsed"),this.node.setAttribute(t.HIDDEN,"true"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()),this.dismissible&&this.collapsed?this.remove():void 0))},e.prototype.remove=function(){this.activator&&this.activator.remove(),a[this.id]=null,this.node.parentNode.removeChild(this.node)},e.prototype._getHeight=function(){var t;return t=this.node.scrollHeight,t+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"),10),t+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"),10),t+"px"},e.prototype._finishTransition=function(t){return t.target===this.node&&"height"===t.propertyName&&(this.node.removeEventListener("transitionend",this._finishTransition),this.node.classList.remove("collapsible--has-transition"),this.node.style.height=null,this.node.offsetHeight,this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()),this.dismissible&&this.collapsed)?this.remove():void 0},e.prototype._generateTransitionEvent=function(){return{type:this.collapsed?i:r,data:{collapsibleInstance:this}}},e.prototype._pairActivator=function(){var e;return e=document.querySelector("["+t.BTN.TARGET+"='"+this.id+"']"),e?(o[this.id]=new n(e,this),this.activator=o[this.id]):void 0},e.prototype._toggleAtWidth=function(t){return null==t&&(t=!1),this.maxwidth&&(this.node.offsetWidth>=this.maxwidth?(this.collapsed&&this.expand(t),this.activator&&this.activator.hide()):this.activator&&this.activator.show()),this},e.prototype._trackWidthResize=function(){return this.maxwidth?window.addEventListener("resize",_.debounce(function(t){return function(){return requestAnimationFrame(function(){return t._toggleAtWidth()})}}(this),50)):void 0},e}(),n=function(){function n(n,i){var r,o;this.node=n,this.collapsible=i,this._clickToToggle=c(this._clickToToggle,this),this.node,this.collapsible,this.target=this.collapsible.node,this.collapsed="false"===this.node.getAttribute(t.BTN.EXPANDED),this.ready=!0,o=this.node.getElementsByClassName(e.BTN.TEXT)[0],this.text={node:o,expanded:o?o.getAttribute(t.BTN.TEXT.EXPANDED):void 0,collapsed:o?o.getAttribute(t.BTN.TEXT.COLLAPSED):void 0},r=this.node.getElementsByClassName(e.BTN.ICON)[0],this.icon={node:r,symbol:r?r.getElementsByTagName("use")[0]:void 0,expanded:r?r.getAttribute(t.BTN.ICON.EXPANDED):void 0,collapsed:r?r.getAttribute(t.BTN.ICON.COLLAPSED):void 0},this.node.addEventListener("click",this._clickToToggle)}return n._collapsibleRefs=a,n.getCollapsibleRefForNode=u,n._activatorRefs=o,n.getActivatorForNode=s,n.prototype.toggle=function(){return this.collapsed?this.expand():this.collapse()},n.prototype.expand=function(){return this.collapsed?(this.ready=!1,this.collapsed=!1,this.node.setAttribute(t.BTN.EXPANDED,"true"),this._toggleText(),this._toggleIcon(),this):this},n.prototype.collapse=function(){return this.collapsed?this:(this.ready=!1,this.collapsed=!0,this.node.setAttribute(t.BTN.EXPANDED,"false"),this._toggleText(),this._toggleIcon(),this)},n.prototype.remove=function(){this.node.removeEventListener("click",this._clickToToggle),o[this.node.getAttribute(t.BTN.TARGET)]=null,this.node.parentNode.removeChild(this.node)},n.prototype.hide=function(){this.node.classList.add("hide")},n.prototype.show=function(){this.node.classList.remove("hide")},n.prototype._toggleText=function(){return this.text.expanded&&this.text.collapsed&&(this.text.node.innerHTML=this.collapsed?this.text.collapsed:this.text.expanded),this},n.prototype._toggleIcon=function(){return this.icon.expanded&&this.icon.collapsed&&(this.collapsed?this.icon.symbol.setAttribute("xlink:href","#"+this.icon.collapsed):this.icon.symbol.setAttribute("xlink:href","#"+this.icon.expanded)),this},n.prototype._clickToToggle=function(t){return this.ready?(t.preventDefault(),document.body.contains(this.target)?this.collapsible.toggle():void 0):void 0},n}(),l=function(){var e,n,i,r,o,s;for(o=document.querySelectorAll("["+t.TYPE+"]"),s=[],i=0,r=o.length;r>i;i++)e=o[i],n=e.id,n?s.push(a[n]=new Shopify.Collapsible(e)):s.push(console.log("This collapsible has been rejected because of missing ID!"));return s},$(document).on("ready page:load",l)}).call(this);t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i($),a=function(){function t(e){n(this,t),this.$node=o["default"](e),this.selectedHandle="",this.bindHandlers()}return e(t,[{key:"bindHandlers",value:function(){var t=this;this.$node.on("click",".preset-picker__item-inner",function(e){t.selectedHandle=o["default"](e.currentTarget).data("preset-handle"),Bindings.refresh()})}},{key:"dirty",value:function(){return""!==this.selectedHandle}},{key:"isSelected",value:function(t){return this.selectedHandle===t}}]),t}();r["default"]=a,Shopify.PresetPicker=null!=r["default"]?r["default"]:r}),t(function(t,e){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles["shopify-home"]=!0)})}();