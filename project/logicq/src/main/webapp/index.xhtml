<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fb="http://www.facebook.com/2008/fbml"
	template="pages/templates/common-template.xhtml"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
	<ui:define name="content">
 <h:head>
	<script src="http://maps.googleapis.com/maps/api/js"></script>
		<script>
		$( document ).ready(function() {
		 var selectedEntity=null;
		 
		  var entityTags = #{addressMB.entitylist}; 
		  var locationTags = #{addressMB.addresslist};
		   var latlongTags = #{addressMB.latlonglist};  
		   var latlonglist= null;
		   var latlonglist2= [];
		   
		  //var latlongTags =["20","40"];  
		 
		 
	 
		  $("#searchlocation").autocomplete({
			autoFocus: true,
		    source: locationTags,
		    change: function (event, ui) {
		    	if(!ui.item){
                	alert("Please select from the available list");
                    $("#userlocation").val("");
                }

            } ,   
            select: function (event, ui) {
            	 
				   
			    var label = ui.item.label;
			    var value = ui.item.value;
			    selectedEntity=value;
			    var index=locationTags.indexOf(value); 	
			    var res = (latlongTags[index]).split(",");
			    initialize(res[3],res[4]);
			   // alert(selectedEntity);
			    var j=0;
			    for ( i=0;i &lt;latlongTags.length;i++){
			    	if(latlongTags[i].indexOf(selectedEntity) > -1){
			    		latlonglist=latlongTags[i].split(",");
			    		
			    		 
			    	      latlonglist2[j]=[latlonglist[latlonglist.length-2],latlonglist[latlonglist.length-1]];
                    	   j++;
			    		 
			    	} 	
		    	     
			    }
			    //alert(latlonglist2[0]);
			    //alert(latlonglist2[1]);
			}
		   
           
		 
		  });
		  $("#searchText").autocomplete({
			    source: entityTags,
			    change: function (event, ui) {
			    	if(!ui.item){
	                	alert("Please select from the available list");
	                    $("#searcserviceprovider").val("");
	                }

	            }
			  });
		});
	
	</script>
	
	
    <script>
    var marker;
   

          function initialize(latitude,longitude) {
        	  
        	  var locations = [
        	                     ['Dr Nihar', latitude,longitude, 'BBSR'],
        	                     ['Dr Rakesh', 20.4622888,85.7278306,'CUTTACK']
        	                     
        	                     ];
        	  var myCenter=new google.maps.LatLng(latitude,longitude);
        	  var mapProp = {
        			  center:myCenter,
        			  zoom:14,
        			  mapTypeId:google.maps.MapTypeId.ROADMAP
        			  };

        			var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

        			var marker=new google.maps.Marker({
        			  position:myCenter,
        			  animation:google.maps.Animation.BOUNCE
        			  });

        			setMarkers(map,locations);
        			}
          function setMarkers(map,locations){

              var marker, i;

        for (i = 0; i &lt; locations.length; i++)
         {  

         var loan = locations[i][0];
         var lat = locations[i][1];
         var long = locations[i][2];
         var add =  locations[i][3];
         latlngset = new google.maps.LatLng(lat, long);
         var marker = new google.maps.Marker({  
                  map: map, title: loan , position: latlngset  
                });
                map.setCenter(marker.getPosition());
                var content = '<div id="content">'+
                '<p id="firstHeading" class="firstHeading">'+loan+' from '+add+
                '<b> MBBS Cardio </b>'+
                '</p>'+
                '<div id="bodyContent">'+'<p><button class="btn btn-blue btn-xs btn-ripple bs-wizard-next">Book Appoitment</button> </p></div> </div>';
                var infowindow = new google.maps.InfoWindow();
                google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ 
                return function() {
                   infowindow.setContent(content);
                   infowindow.open(map,marker);
                };
            })(marker,content,infowindow)); 

          }
          }

</script>
</h:head>
		<div class="display-animation">
		<form id="userForm">
			<div
				class="search-wizard panel bs-wizard bs-wizard-steps-with-progress">
				<div class="panel-heading">
						</div>
				<div class="panel-body">
					<div class="col-md-5">
						<div class="tab-pane active" id="form3_tab1">
							<div class="form-group">
								<h:inputText value="#{userSearchMB.searchlocation}" p:placeholder="Search your Pincode"
									class="form-control" 
									id="searchlocation" required="true" autosubmit="true">
									<f:ajax listener="#{userSearchMB.getAllEntityByPIN}"></f:ajax></h:inputText>
							</div>
							<div id="googleMap" style="width:580px;height:380px;"></div>
						</div>
					</div>
					<div class="col-md-7">
						<div class="row">
							<div class="col-md-10">
								<div class="form-group">
									<h:inputText p:placeholder="Type something here..."
										class="form-control" value="#{userSearchMB.searchText}"
										id="searchText" required="true" autosubmit="true">
									</h:inputText>
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group">
									<h:form>
										<b:commandButton look="primary"
											action="#{userSearchMB.searchUsers}" id="searchbutton"
											iconAwesome="fa-search"/>
									</h:form>
								</div>
							</div>
						</div>
						<div class="col-md-12">

							<div class="col-md-4">
								<b:button value="Find Near By" id="findNearBy" look="default"
									actionListener="#{userMB.searchEntity}"
									action="#{userMB.entitynavigation}" />
							</div>
							<div class="col-md-6">
								<b:button value="Emergency Book" id="emergency" look="default"
									actionListener="#{userMB.searchEntity}"
									action="#{userMB.entitynavigation}" />


							</div>

						</div>
						<br> </br> <br> </br>
						<h:form>
							<div class="col-sm-12 margin-top-10 show-listing">


								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/fd.ico" id="familydoc"
											class="img-responsive" />
										<h:commandLink id="fdcommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="FamilyDoctor" id="familydoctor" />
										</h:commandLink>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/beauty.ico" id="beauty"
											class="img-responsive" />
										<h:link id="beautycommandlink"
											action="#{userMB.selectedEntity}">
											<h:outputText value="BeautyCare" id="beautycare" />
										</h:link>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/plumber.ico" id="plumber"
											class="img-responsive" />
										<h:commandLink id="plumbercommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Plumber" id="plumber" />
										</h:commandLink>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/carpenter.ico" id="carpenter"
											class="img-responsive" />
										<h:link id="carpentercommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Carpenter" id="carpenter" />
										</h:link>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/advocat.ico" id="advocate"
											class="img-responsive" />
										<h:commandLink id="Advocatecommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Advocate" id="advocate" />
										</h:commandLink>
									</div>
								</div>
							</div>
						</h:form>
						<br> </br>
						<h:form>
							<div class="col-sm-12 margin-top-10 show-listing">
								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/tutor.ico" id="tutor"
											class="img-responsive" />
										<h:link id="tutorcommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Tutor" id="tutor" />
										</h:link>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/grocery.ico" id="grocery"
											class="img-responsive" />
										<h:link id="grocerycommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Grocery" id="grocery" />
										</h:link>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/mason.ico" id="mason"
											class="img-responsive" />
										<h:commandLink id="masoncommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Mason" id="masaon" />
										</h:commandLink>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/elctrician.ico" id="electrican"
											class="img-responsive" />

										<h:commandLink id="electiricancommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Elctician" id="electrican" />
										</h:commandLink>
									</div>
								</div>
								<div class="form-group">
									<div class="col-md-2">
										<img src="pages/img/travel.ico" id="travel"
											class="img-responsive" />
										<h:commandLink id="travelcancommandlink"
											action="#{userMB.selectedEntity}" rendered="true"
											oncomplete="javascript:location.reload(true)">
											<h:outputText value="Travel" id="travel" />
										</h:commandLink>
									</div>
								</div>
							</div>
						</h:form>
					</div>
				</div>

			</div>
			</form>
		</div>
		 
	</ui:define>

</ui:composition>